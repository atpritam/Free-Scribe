import{j as e,r as n,L as v}from"./index-DEVkKWiz.js";function w(u){const{text:t}=u;return e.jsx("div",{children:t?e.jsx("p",{children:t}):e.jsx("p",{children:"No Transcription Available"})})}function N(u){const{text:t,translatedText:o,language:s}=u,[x,p]=n.useState(""),[i,m]=n.useState("Select language"),[g,a]=n.useState(!1),[h,r]=n.useState(!1),[f,j]=n.useState("Select language"),d=n.useRef(null);n.useEffect(()=>{d.current||(d.current=new Worker(new URL("/Free-Scribe/assets/translate.worker-BM30k2EE.js",import.meta.url),{type:"module"}));const l=async c=>{switch(c.data.status){case"initiate":r(!0);break;case"progress":r(!0);break;case"update":r(!1),p(c.data.output),o.current=c.data.output;break;case"complete":r(!1),p(c.data.output.map(b=>b.translation_text).join(" ")),o.current=c.data.output.map(b=>b.translation_text).join(" ");break}};return d.current.addEventListener("message",l),()=>d.current.removeEventListener("message",l)});const T=async()=>{g||i==="Select language"||f!==i&&(o.current=null,a(!0),r(!0),d.current.postMessage({text:t,src_lang:"eng_Latn",tgt_lang:i}),a(!1),r(!1),j(i))};return e.jsxs(e.Fragment,{children:[!g&&s.current&&e.jsxs("div",{className:"flex flex-col gap-1 mb-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500 mr-auto",children:"To language"}),e.jsxs("div",{className:"flex items-stretch gap-2 sm:gap-4",children:[e.jsxs("select",{value:s.current,className:"flex-1 outline-none w-full focus:outline-none bg-white duration-200 p-2  rounded",onChange:l=>{m(l.target.value),s.current=l.target.value},children:[e.jsx("option",{value:"Select language",children:"Select language"}),Object.entries(v).map(([l,c])=>e.jsx("option",{value:c,children:l},l))]}),e.jsx("button",{onClick:T,className:"specialBtn px-3 py-2 rounded-lg text-blue-400 hover:text-blue-600 duration-200",children:"Translate"})]})]}),h&&e.jsx("p",{children:e.jsx("i",{className:"fa-solid fa-spinner animate-spin"})}),o.current&&e.jsx("div",{className:"fixed-height",children:e.jsx("p",{children:o.current})})]})}function k(u){const[t,o]=n.useState("Transcription"),{text:s}=u,x=n.useRef(""),p=n.useRef("Select language"),i=a=>{o(a.target.innerText)},m=()=>{const a=t==="Translation"?x.current:s;navigator.clipboard.writeText(a)},g=()=>{const a=document.createElement("a"),h=t==="Translation"?x.current:s,r=new Blob([h],{type:"text/plain"});a.href=URL.createObjectURL(r),a.download=t==="Translation"?"Translation.txt":"Transcription.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return e.jsxs("main",{className:"flex-1 p-4 flex flex-col gap-3 text-center sm:gap-4 justify-center pb-20 w-full max-w-prose mx-auto mt-10",children:[e.jsxs("h1",{className:"font-semibold text-3xl sm:text-5xl md:text-6xl",children:["Your ",e.jsx("span",{className:"text-blue-400 bold nowrap",children:t})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:mx-auto bg-white rounded overflow-hidden items-center p-1 blueShadow border-[2px] border-solid border-blue-300",children:[e.jsx("button",{className:"px-4 rounded duration-200 py-1 "+(t==="Transcription"?" bg-blue-300 text-white":" text-blue-400 hover:text-blue-600"),onClick:i,children:"Transcription"}),e.jsx("button",{className:"px-4 rounded duration-200 py-1 "+(t==="Translation"?" bg-blue-300 text-white":" text-blue-400 hover:text-blue-600"),onClick:i,children:"Translation"})]}),e.jsx("div",{className:"fixed-height-container",children:t==="Transcription"?e.jsx(w,{text:s}):e.jsx(N,{text:s,translatedText:x,language:p})}),e.jsxs("div",{className:"flex items-center gap-4 mx-auto mt-3",children:[e.jsx("button",{onClick:m,title:"Copy",className:"bg-white hover:text-blue-500 duration-200 text-blue-300 px-2 aspect-square grid place-items-center rounded",children:e.jsx("i",{className:"fa-solid fa-copy"})}),e.jsx("button",{onClick:g,title:"Download",className:"bg-white hover:text-blue-500 duration-200 text-blue-300 px-2 aspect-square grid place-items-center rounded",children:e.jsx("i",{className:"fa-solid fa-download"})})]})]})}export{k as default};
