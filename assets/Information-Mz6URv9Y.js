import{j as e,r as n,L as v}from"./index-CMAFd8lJ.js";function w(u){const{text:a}=u;return e.jsx("div",{children:a?e.jsx("p",{children:a}):e.jsx("p",{children:"No Transcription Available"})})}function N(u){const{text:a,translatedText:l,language:d}=u,[m,o]=n.useState(""),[s,h]=n.useState("Select language"),[x,g]=n.useState(!1),[f,t]=n.useState(!1),[i,b]=n.useState("Select language"),p=n.useRef(null);n.useEffect(()=>{p.current||(p.current=new Worker(new URL("/Free-Scribe/assets/translate.worker-BM30k2EE.js",import.meta.url),{type:"module"}));const r=async c=>{switch(c.data.status){case"initiate":t(!0);break;case"progress":t(!0);break;case"update":t(!1),o(c.data.output),l.current=c.data.output;break;case"complete":t(!1),o(c.data.output.map(j=>j.translation_text).join(" ")),l.current=c.data.output.map(j=>j.translation_text).join(" ");break}};return p.current.addEventListener("message",r),()=>p.current.removeEventListener("message",r)});const T=async()=>{x||s==="Select language"||i!==s&&(l.current=null,g(!0),t(!0),p.current.postMessage({text:a,src_lang:"eng_Latn",tgt_lang:s}),g(!1),t(!1),b(s))};return e.jsxs(e.Fragment,{children:[!x&&d.current&&e.jsxs("div",{className:"flex flex-col gap-1 mb-4",children:[e.jsx("p",{className:"text-xs sm:text-sm font-medium text-slate-500 mr-auto",children:"To language"}),e.jsxs("div",{className:"flex items-stretch gap-2 sm:gap-4",children:[e.jsxs("select",{value:d.current,className:"flex-1 outline-none w-full focus:outline-none bg-white duration-200 p-2  rounded",onChange:r=>{h(r.target.value),d.current=r.target.value},children:[e.jsx("option",{value:"Select language",children:"Select language"}),Object.entries(v).map(([r,c])=>e.jsx("option",{value:c,children:r},r))]}),e.jsx("button",{onClick:T,className:"specialBtn px-3 py-2 rounded-lg text-blue-400 hover:text-blue-600 duration-200",children:"Translate"})]})]}),f&&e.jsx("p",{children:e.jsx("i",{className:"fa-solid fa-spinner animate-spin"})}),l.current&&e.jsx("div",{className:"fixed-height",children:e.jsx("p",{children:l.current})})]})}function k(u){const[a,l]=n.useState("Transcription"),[d,m]=n.useState(!1),{text:o}=u,s=n.useRef(""),h=n.useRef("Select language"),x=t=>{l(t.target.innerText)},g=()=>{const t=a==="Translation"?s.current:o;t&&navigator.clipboard.writeText(t)},f=()=>{const t=a==="Translation"?s.current:o;if(d||!t)return;m(!0);const i=document.createElement("a"),b=new Blob([t],{type:"text/plain"});i.href=URL.createObjectURL(b),i.download=a==="Translation"?"Translation.txt":"Transcription.txt",document.body.appendChild(i),i.click(),document.body.removeChild(i),m(!1)};return e.jsxs("main",{className:"flex-1 p-4 flex flex-col gap-3 text-center sm:gap-4 justify-center pb-20 w-full max-w-prose mx-auto mt-10",children:[e.jsxs("h1",{className:"font-semibold text-3xl sm:text-5xl md:text-6xl",children:["Your ",e.jsx("span",{className:"text-blue-400 bold nowrap",children:a})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:mx-auto bg-white rounded overflow-hidden items-center p-1 blueShadow border-[2px] border-solid border-blue-300",children:[e.jsx("button",{className:"px-4 rounded duration-200 py-1 "+(a==="Transcription"?" bg-blue-300 text-white":" text-blue-400 hover:text-blue-600"),onClick:x,children:"Transcription"}),e.jsx("button",{className:"px-4 rounded duration-200 py-1 "+(a==="Translation"?" bg-blue-300 text-white":" text-blue-400 hover:text-blue-600"),onClick:x,children:"Translation"})]}),e.jsx("div",{className:"fixed-height-container",children:a==="Transcription"?e.jsx(w,{text:o}):e.jsx(N,{text:o,translatedText:s,language:h})}),e.jsxs("div",{className:"flex items-center gap-4 mx-auto mt-3",children:[e.jsx("button",{onClick:g,title:"Copy",className:"bg-white hover:text-blue-500 duration-200 text-blue-300 px-2 aspect-square grid place-items-center rounded",children:e.jsx("i",{className:"fa-solid fa-copy"})}),e.jsx("button",{onClick:f,title:"Download",className:"bg-white hover:text-blue-500 duration-200 text-blue-300 px-2 aspect-square grid place-items-center rounded",children:e.jsx("i",{className:"fa-solid fa-download"})})]})]})}export{k as default};
